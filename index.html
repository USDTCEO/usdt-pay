<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Оплата USDT</title>
  <script src="https://cdn.jsdelivr.net/npm/tronweb/dist/TronWeb.js"></script>
</head>
<body>

<button id="pay">Отправить 1 USDT</button>

<script>
const USDT_CONTRACT = "TXLAQ63Xg1NAzckPwKHvzw7CSEmLMEqcdj"; // Офиц. контракт USDT TRC20
const RECEIVER = "TEGcg6RSNnGfob4zaeD3hdWi8XUsvMAHvQ"; // твой T-адрес
const AMOUNT = 1 * 1e6; // 1 USDT = 1,000,000 (6 знаков)

// Функция ожидания TronLink
async function waitForTronLink() {
  return new Promise((resolve) => {
    const check = setInterval(() => {
      if (window.tronWeb && window.tronWeb.ready) {
        clearInterval(check);
        resolve(window.tronWeb);
      }
    }, 500);
  });
}

document.getElementById("pay").addEventListener("click", async () => {
  const tronWeb = await waitForTronLink();

  const contract = await tronWeb.contract().at(USDT_CONTRACT);

  try {
    const tx = await contract.transfer(RECEIVER, AMOUNT).send();
    alert("Успешно! TX ID: " + tx);
  } catch (err) {
    alert("Ошибка: " + err);
  }
});
</script>
</body>
</html>
